<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>מעבדת הפרומפטים המהפכנית | GENSPARK & LANCHI</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            font-family: 'Heebo', sans-serif;
        }
        
        :root {
            --primary: #667eea;
            --secondary: #764ba2;
            --accent: #f093fb;
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --info: #3b82f6;
            --dark: #1a202c;
            --light: #f8fafc;
        }

        body {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 50%, var(--accent) 100%);
            min-height: 100vh;
            overflow-x: hidden;
            scroll-behavior: smooth;
        }

        /* === FIX: עיצוב קריא לתיבות קלט ותיבות בחירה === */
        .input-field {
            background-color: rgba(0, 0, 0, 0.2) !important;
            backdrop-filter: blur(5px);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .input-field::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
        datalist option {
            background-color: white;
            color: black;
        }
        /* ================================================ */

        /* גלקסיה מתנועעת ברקע */
        .galaxy-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.1;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite ease-in-out;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(0.8); }
            50% { opacity: 1; transform: scale(1.2); }
        }

        /* אנימציות מתקדמות */
        .morphing-card {
            background: linear-gradient(145deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 24px;
            transition: all 0.6s cubic-bezier(0.23, 1, 0.320, 1);
            position: relative;
            overflow: hidden;
        }

        .morphing-card:hover {
            transform: translateY(-20px) scale(1.02);
            box-shadow: 0 40px 80px rgba(0,0,0,0.3);
            border-color: rgba(255,255,255,0.4);
        }

        .morphing-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, transparent, rgba(255,255,255,0.1), transparent);
            transform: translateX(-100%);
            transition: transform 0.8s ease;
        }

        .morphing-card:hover::before {
            transform: translateX(100%);
        }

        /* כפתורים הולוגרפיים */
        .holo-button {
            background: linear-gradient(145deg, var(--primary), var(--secondary));
            border: none;
            border-radius: 16px;
            padding: 16px 32px;
            color: white;
            font-weight: 700;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: all 0.4s ease;
            box-shadow: 0 8px 32px rgba(102, 126, 234, 0.4);
        }

        .holo-button:hover {
            transform: translateY(-4px);
            box-shadow: 0 16px 48px rgba(102, 126, 234, 0.6);
        }

        .holo-button::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.3) 50%, transparent 70%);
            transform: translateX(-100%);
            transition: transform 0.6s ease;
        }

        .holo-button:hover::after {
            transform: translateX(100%);
        }

        /* AI עין פועמת */
        .ai-eye {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: radial-gradient(circle, var(--info) 0%, var(--primary) 50%, var(--dark) 100%);
            position: relative;
            animation: pulse-glow 2s infinite ease-in-out;
            box-shadow: 0 0 30px var(--info);
        }

        .ai-eye::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            animation: scan 3s infinite linear;
        }

        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 30px var(--info); }
            50% { box-shadow: 0 0 60px var(--info), 0 0 90px var(--primary); }
        }

        @keyframes scan {
            0% { transform: translate(-50%, -50%) scale(0.8); }
            50% { transform: translate(-50%, -50%) scale(1.2); }
            100% { transform: translate(-50%, -50%) scale(0.8); }
        }

        /* התקדמות חכמה */
        .smart-progress {
            height: 8px;
            background: rgba(255,255,255,0.2);
            border-radius: 4px;
            overflow: hidden;
            position: relative;
        }

        .smart-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--success), var(--info), var(--primary));
            border-radius: 4px;
            transition: width 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            position: relative;
        }

        .smart-progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: progress-shine 2s infinite ease-in-out;
        }

        @keyframes progress-shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* גרפים מתקדמים */
        .chart-container {
            height: 300px;
            position: relative;
            background: rgba(255,255,255,0.05);
            border-radius: 16px;
            padding: 20px;
            backdrop-filter: blur(10px);
        }

        /* הולוגרמה */
        .hologram {
            background: linear-gradient(45deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1), rgba(240, 147, 251, 0.1));
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 20px;
            backdrop-filter: blur(20px);
            position: relative;
            overflow: hidden;
        }

        /* הודעות */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            min-width: 300px;
            padding: 16px 20px;
            border-radius: 12px;
            color: white;
            font-weight: 600;
            z-index: 1000;
            transform: translateX(400px);
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success { background: linear-gradient(135deg, var(--success), #059669); }
        .notification.warning { background: linear-gradient(135deg, var(--warning), #d97706); }
        .notification.error { background: linear-gradient(135deg, var(--error), #dc2626); }
        .notification.info { background: linear-gradient(135deg, var(--info), #2563eb); }
        
        /* משתנים דינמיים */
        .dynamic-bg {
            background: linear-gradient(135deg, 
                hsl(var(--hue, 240), 70%, 60%) 0%, 
                hsl(calc(var(--hue, 240) + 30), 70%, 50%) 50%, 
                hsl(calc(var(--hue, 240) + 60), 70%, 65%) 100%);
            transition: all 1s ease;
        }
    </style>
</head>
<body class="dynamic-bg">
    <!-- גלקסיה ברקע -->
    <div class="galaxy-bg" id="galaxy"></div>

    <!-- ניווט מתקדם -->
    <nav class="fixed top-0 left-0 right-0 z-50 p-4">
        <div class="morphing-card p-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-4 space-x-reverse">
                    <img src="https://cdn1.genspark.ai/user-upload-image/22_generated/3c1fc5ac-8855-4c3d-a9d0-a082d92e013d" alt="LANCHI Logo" class="w-12 h-12 rounded-full">
                    <div>
                        <h1 class="text-white font-bold text-lg">מעבדת הפרומפטים המהפכנית</h1>
                        <p class="text-white/70 text-sm">GENSPARK × LANCHI</p>
                    </div>
                </div>
                
                <div class="flex items-center space-x-4 space-x-reverse">
                    <div class="ai-eye"></div>
                </div>
            </div>
        </div>
    </nav>

    <!-- כותרת ראשית -->
    <header class="pt-32 pb-16 text-center">
        <div class="container mx-auto px-4">
            <h1 class="text-6xl font-black text-white mb-6">
                🚀 המעבדה המתקדמת ביותר בעולם
            </h1>
            <h2 class="text-3xl font-bold text-white/90 mb-8">
                AI חכם • ניתוח מתקדם • יכולות פורצות דרך
            </h2>
            <p class="text-xl text-white/80 max-w-4xl mx-auto leading-relaxed">
                ברוכים הבאים לעתיד של יצירת פרומפטים. המעבדה שלנו משלבת בינה מלאכותית מתקדמת, 
                ניתוח רב-שכבתי ולמידה אדפטיבית כדי להביא לכם את הכלי החכם ביותר שיש.
            </p>
        </div>
    </header>

    <!-- סטטיסטיקות בזמן אמת -->
    <section class="mb-16">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                <div class="morphing-card p-4 text-center">
                    <div class="text-3xl font-black text-white mb-2" id="promptsGenerated">1,247</div>
                    <div class="text-white/80 text-sm">פרומפטים נוצרו היום</div>
                </div>
                <div class="morphing-card p-4 text-center">
                    <div class="text-3xl font-black text-white mb-2" id="successRate">97.3%</div>
                    <div class="text-white/80 text-sm">שיעור הצלחה AI</div>
                </div>
                <div class="morphing-card p-4 text-center">
                    <div class="text-3xl font-black text-white mb-2" id="activeUsers">892</div>
                    <div class="text-white/80 text-sm">משתמשים פעילים</div>
                </div>
                <div class="morphing-card p-4 text-center">
                    <div class="text-3xl font-black text-white mb-2" id="optimizations">3,456</div>
                    <div class="text-white/80 text-sm">אופטימיזציות בוצעו</div>
                </div>
            </div>
        </div>
    </section>

    <!-- מחולל AI חכם -->
    <section class="mb-16">
        <div class="container mx-auto px-4">
            <div id="main-generator" class="hologram p-8">
                <div class="text-center mb-8">
                    <h3 class="text-4xl font-black text-white mb-4">
                        🧠 מחולל AI מתקדם
                    </h3>
                    <p class="text-white/80 text-lg">
                        בינה מלאכותית שלומדת, מתאימה ומשתפרת עם כל שימוש
                    </p>
                </div>

                <div class="grid md:grid-cols-3 gap-6 mb-8">
                    <div class="p-6">
                        <label for="aiType" class="block text-white font-semibold mb-3">
                            <i class="fas fa-brain mr-2"></i>
                            סוג האינטליגנציה
                        </label>
                        <input type="text" id="aiType" list="aiType-list" class="input-field w-full p-4 rounded-xl" placeholder="בחר או הקלד סוג AI">
                        <datalist id="aiType-list">
                            <option value="יצירתי ואמנותי"></option>
                            <option value="אנליטי ולוגי"></option>
                            <option value="רגשי ואמפתי"></option>
                            <option value="טכני ומדעי"></option>
                            <option value="אסטרטגי ועסקי"></option>
                            <option value="חינוכי והדרכתי"></option>
                        </datalist>
                    </div>

                    <div class="p-6">
                        <label for="expertise" class="block text-white font-semibold mb-3">
                            <i class="fas fa-target mr-2"></i>
                            תחום מומחיות
                        </label>
                        <input type="text" id="expertise" list="expertise-list" class="input-field w-full p-4 rounded-xl" placeholder="בחר או הקלד תחום">
                        <datalist id="expertise-list">
                            <option value="יצירת תוכן"></option>
                            <option value="שיווק ופרסום"></option>
                            <option value="תכנות ופיתוח"></option>
                            <option value="עיצוב וגרפיקה"></option>
                            <option value="עסקים ויזמות"></option>
                            <option value="חינוך והוראה"></option>
                            <option value="מחקר ופיתוח"></option>
                            <option value="בריאות ורפואה"></option>
                        </datalist>
                    </div>

                    <div class="p-6">
                        <label for="complexity" class="block text-white font-semibold mb-3">
                            <i class="fas fa-gauge mr-2"></i>
                            רמת התקדמות
                        </label>
                        <input type="text" id="complexity" list="complexity-list" class="input-field w-full p-4 rounded-xl" placeholder="בחר או הקלד רמה">
                        <datalist id="complexity-list">
                            <option value="מתחיל - פשוט וברור"></option>
                            <option value="בינוני - מאוזן ומפורט"></option>
                            <option value="מתקדם - מקצועי ועמוק"></option>
                            <option value="מומחה - חדשני ופורץ דרך"></option>
                            <option value="גאוני - מהפכני ובלתי רגיל"></option>
                        </datalist>
                    </div>
                </div>

                <div class="mb-6 px-6">
                    <label for="taskDescription" class="block text-white font-semibold mb-3">
                        <i class="fas fa-comment-dots mr-2"></i>
                        תאר את המשימה שלך (AI יבין ויתאים)
                    </label>
                    <textarea 
                        id="taskDescription" 
                        placeholder="כתוב כאן במילים פשוטות מה אתה רוצה לעשות..."
                        class="input-field w-full h-32 p-4 rounded-xl resize-none"
                    ></textarea>
                </div>

                <div class="mb-6 px-6">
                    <div class="text-white font-semibold mb-3">
                        <i class="fas fa-sliders-h mr-2"></i>
                        הגדרות AI מתקדמות
                    </div>
                    <div class="grid md:grid-cols-3 gap-4">
                        <div>
                            <label class="text-white/80 text-sm">יצירתיות</label>
                            <input type="range" id="creativity" min="0" max="100" value="70" class="w-full">
                        </div>
                        <div>
                            <label class="text-white/80 text-sm">פורמליות</label>
                            <input type="range" id="formality" min="0" max="100" value="50" class="w-full">
                        </div>
                        <div>
                            <label class="text-white/80 text-sm">אורך תגובה</label>
                            <input type="range" id="responseLength" min="0" max="100" value="60" class="w-full">
                        </div>
                    </div>
                </div>

                <div class="text-center mb-6">
                    <button onclick="generateAIPrompt()" class="holo-button text-xl px-12 py-4">
                        <i class="fas fa-rocket mr-3"></i>
                        יצירת פרומפט חכם
                    </button>
                </div>

                <div id="aiProgress" class="hidden mb-6 px-6">
                    <div class="text-white mb-2">
                        <i class="fas fa-cog fa-spin mr-2"></i>
                        AI עובד על הפרומפט שלך...
                    </div>
                    <div class="smart-progress">
                        <div class="smart-progress-bar" id="progressBar" style="width: 0%"></div>
                    </div>
                </div>

                <div id="aiResult" class="hidden">
                    <div class="morphing-card p-6 mb-4">
                        <div class="flex justify-between items-center mb-4">
                            <h4 class="text-xl font-bold text-white">
                                <i class="fas fa-magic mr-2"></i>
                                הפרומפט החכם שנוצר:
                            </h4>
                            <div class="flex space-x-2 space-x-reverse">
                                <button onclick="copyPrompt()" class="holo-button px-4 py-2 text-sm">
                                    <i class="fas fa-copy mr-1"></i>
                                    העתק
                                </button>
                                <button onclick="initiateOptimizationFromGenerator()" class="holo-button px-4 py-2 text-sm">
                                    <i class="fas fa-wand-magic-sparkles mr-1"></i>
                                    שפר עוד
                                </button>
                            </div>
                        </div>
                        <div id="promptText" class="text-white/90 leading-relaxed bg-black/20 p-4 rounded-lg font-mono text-sm"></div>
                    </div>

                    <div class="grid md:grid-cols-2 gap-4">
                        <div class="morphing-card p-4">
                            <h5 class="text-white font-semibold mb-2">
                                <i class="fas fa-chart-line mr-2"></i>
                                ניתוח איכות
                            </h5>
                            <div class="chart-container" style="height: 200px;">
                                <canvas id="qualityChart"></canvas>
                            </div>
                        </div>

                        <div class="morphing-card p-4">
                            <h5 class="text-white font-semibold mb-2">
                                <i class="fas fa-lightbulb mr-2"></i>
                                הצעות שיפור
                            </h5>
                            <div id="suggestions" class="text-white/80 text-sm space-y-2"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- תחנות עבודה חכמות -->
    <section class="mb-16">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12">
                <h3 class="text-4xl font-black text-white mb-4">
                    🔬 מעבדות מתמחות
                </h3>
            </div>

            <div class="grid lg:grid-cols-2 xl:grid-cols-3 gap-8">
                <!-- מעבדת אופטימיזציה -->
                <div id="optimization-lab" class="morphing-card p-6">
                    <div class="text-center mb-6">
                        <div class="ai-eye mx-auto mb-4" style="background: radial-gradient(circle, #f59e0b 0%, #d97706 50%, #92400e 100%);"></div>
                        <h4 class="text-2xl font-bold text-white">מעבדת השיפור החכם</h4>
                        <p class="text-white/70">AI שמשפר כל פרומפט למקסימום יעילות</p>
                    </div>

                    <div class="mb-4">
                        <label for="originalPrompt" class="block text-white font-semibold mb-3">
                            <i class="fas fa-edit mr-2"></i>
                            הדבק פרומפט לשיפור
                        </label>
                        <textarea 
                            id="originalPrompt" 
                            class="input-field w-full h-24 p-3 rounded-lg resize-none text-sm"
                        ></textarea>
                    </div>

                    <div class="grid grid-cols-2 gap-3 mb-4">
                        <input type="text" id="optimizationGoal" list="optimizationGoal-list" class="input-field w-full p-2 rounded-lg text-sm" placeholder="מטרת השיפור">
                        <datalist id="optimizationGoal-list">
                            <option value="בהירות ופשטות"></option>
                            <option value="יצירתיות וחדשנות"></option>
                            <option value="דיוק ופרטנות"></option>
                            <option value="יעילות וקצרנות"></option>
                        </datalist>

                        <input type="text" id="targetAudience" list="targetAudience-list" class="input-field w-full p-2 rounded-lg text-sm" placeholder="קהל יעד">
                        <datalist id="targetAudience-list">
                            <option value="כללי"></option>
                            <option value="מקצועי"></option>
                            <option value="טכני"></option>
                            <option value="יצירתי"></option>
                        </datalist>
                    </div>

                    <button onclick="optimizePrompt()" class="holo-button w-full">
                        <i class="fas fa-magic mr-2"></i>
                        שפר פרומפט באופן חכם
                    </button>

                    <div id="optimizationResult" class="hidden mt-4">
                        <div class="morphing-card p-4 bg-black/20 mb-3">
                            <h5 class="text-white font-semibold mb-2">✨ גרסה משופרת:</h5>
                            <pre id="optimizedOutput" class="text-white/90 text-sm leading-relaxed whitespace-pre-wrap"></pre>
                        </div>
                        <div class="morphing-card p-4 bg-black/20">
                            <h5 class="text-white font-semibold mb-2">📊 ניתוח השיפורים:</h5>
                            <div id="improvementAnalysis" class="text-white/80 text-sm"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- פוטר -->
    <footer class="py-16">
        <div class="container mx-auto px-4 text-center">
            <p class="text-white/60 text-sm">
                © 2024 GENSPARK × LANCHI | המעבדה המתקדמת ביותר ליצירת פרומפטים
            </p>
        </div>
    </footer>

    <!-- Container להודעות -->
    <div id="notificationContainer"></div>

    <script>
        let qualityChartInstance;
        let analysisChartInstance; 

        function createGalaxy() {
            const galaxy = document.getElementById('galaxy');
            if (galaxy.children.length > 0) return; 
            for (let i = 0; i < 100; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.width = Math.random() * 3 + 1 + 'px';
                star.style.height = star.style.width;
                star.style.animationDelay = Math.random() * 3 + 's';
                galaxy.appendChild(star);
            }
        }

        function updateRealTimeStats() {
            setInterval(() => {
                document.getElementById('promptsGenerated').textContent = Math.floor(1200 + Math.random() * 100).toLocaleString();
                document.getElementById('successRate').textContent = (96 + Math.random() * 2).toFixed(1) + '%';
                document.getElementById('activeUsers').textContent = Math.floor(800 + Math.random() * 200).toLocaleString();
                document.getElementById('optimizations').textContent = Math.floor(3400 + Math.random() * 100).toLocaleString();
            }, 5000);
        }

        function updateDynamicColors() {
            const hue = Math.floor(Date.now() / 100) % 360;
            document.documentElement.style.setProperty('--hue', hue);
        }

        function showNotification(message, type = 'success', duration = 3000) {
            const container = document.getElementById('notificationContainer');
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            const icons = { success: 'fa-check-circle', warning: 'fa-exclamation-triangle', error: 'fa-times-circle', info: 'fa-info-circle' };
            notification.innerHTML = `<div class="flex items-center"><i class="fas ${icons[type]} ml-3 text-lg"></i><span>${message}</span></div>`;
            container.appendChild(notification);
            setTimeout(() => notification.classList.add('show'), 100);
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => container.removeChild(notification), 500);
            }, duration);
        }

        function generateAIPrompt() {
            const aiTypeInput = document.getElementById('aiType').value;
            const expertiseInput = document.getElementById('expertise').value;
            const complexityInput = document.getElementById('complexity').value;
            const taskDescription = document.getElementById('taskDescription').value;

            if (!aiTypeInput || !expertiseInput || !complexityInput || !taskDescription.trim()) {
                showNotification('אנא מלא את כל השדות הנדרשים', 'warning');
                return;
            }

            document.getElementById('aiProgress').classList.remove('hidden');
            document.getElementById('aiResult').classList.add('hidden');
            
            let progress = 0;
            const progressBar = document.getElementById('progressBar');
            const progressInterval = setInterval(() => {
                progress += Math.random() * 15;
                if (progress >= 100) {
                    progress = 100;
                    clearInterval(progressInterval);
                    setTimeout(showAIResult, 400);
                }
                progressBar.style.width = progress + '%';
            }, 200);

            function showAIResult() {
                const creativity = document.getElementById('creativity').value;
                const formality = document.getElementById('formality').value;
                const responseLength = document.getElementById('responseLength').value;

                const creativityLevel = creativity > 70 ? 'בגישה יצירתית וחדשנית' : creativity > 40 ? 'בגישה מאוזנת' : 'בגישה מעשית וישירה';
                const formalityLevel = formality > 70 ? 'בטון רשמי ומקצועי' : formality > 40 ? 'בטון חברותי-מקצועי' : 'בטון נעים וחברותי';
                const responseStyle = responseLength > 70 ? 'עם הסבר מפורט ומקיף' : responseLength > 40 ? 'עם הסבר מאוזן' : 'עם הסבר קצר ותמציתי';

                const prompt = `אתה מומחה ${aiTypeInput} בתחום ${expertiseInput}.

המשימה שלך: ${taskDescription}

אנא ספק פתרון ברמה של "${complexityInput}" ${responseStyle}, תוך שמירה על ${formalityLevel} וגישה ${creativityLevel}.

מבנה התשובה הרצוי:
1. ניתוח המשימה.
2. פתרון מפורט עם שלבים ברורים.
3. דוגמאות מעשיות.
4. המלצות להמשך.`;

                document.getElementById('promptText').textContent = prompt;
                document.getElementById('aiProgress').classList.add('hidden');
                document.getElementById('aiResult').classList.remove('hidden');

                createQualityChart();
                generateSuggestions();
                showNotification('פרומפט חכם נוצר בהצלחה!', 'success');
            }
        }

        function createQualityChart() {
            const ctx = document.getElementById('qualityChart').getContext('2d');
            if (qualityChartInstance) qualityChartInstance.destroy();
            qualityChartInstance = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['בהירות', 'מבנה', 'יצירתיות', 'מקצועיות', 'מעשיות'],
                    datasets: [{
                        label: 'ציון איכות',
                        data: [Math.floor(80 + Math.random() * 20), Math.floor(80 + Math.random() * 20), Math.floor(80 + Math.random() * 20), Math.floor(80 + Math.random() * 20), Math.floor(80 + Math.random() * 20)],
                        backgroundColor: 'rgba(102, 126, 234, 0.2)',
                        borderColor: '#667eea',
                        borderWidth: 2,
                        pointBackgroundColor: '#667eea'
                    }]
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: { r: { beginAtZero: true, max: 100, ticks: { color: 'white', backdropColor: 'transparent' }, grid: { color: 'rgba(255,255,255,0.1)' }, pointLabels: { color: 'white', font: { size: 10 } } } }
                }
            });
        }
        
        function generateSuggestions() {
            const suggestions = [
                '💡 הוסף דוגמאות ספציפיות מהתחום שלך.',
                '🎯 הגדר מדדי הצלחה מדידים (KPIs).',
                '⚡ שקול לבקש אלטרנטיבות לפתרון.',
                '🔍 בקש התייחסות לסיכונים אפשריים.'
            ];
            document.getElementById('suggestions').innerHTML = suggestions.map(s => `<div class="flex items-start"><span>${s}</span></div>`).join('');
        }
        
        function initiateOptimizationFromGenerator() {
            const promptText = document.getElementById('promptText').textContent;
            if (!promptText) {
                showNotification('יש ליצור פרומפט תחילה.', 'warning');
                return;
            }
            
            const optimizationInput = document.getElementById('originalPrompt');
            optimizationInput.value = promptText;
            showNotification('הפרומפט הועבר למעבדת השיפור.', 'info');
            document.getElementById('optimization-lab').scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        function optimizePrompt() {
            const originalPrompt = document.getElementById('originalPrompt').value.trim();
            const optimizationGoal = document.getElementById('optimizationGoal').value;
            const targetAudience = document.getElementById('targetAudience').value;

            if (!originalPrompt) {
                showNotification('אנא הכנס פרומפט לשיפור', 'warning');
                return;
            }

            const optimizedPrompt = `[CONTEXT]
אתה מומחה מקצועי ומנוסה.

[TASK]
נתח את הפרומפט הבא וצור גרסה משופרת שלו:
"${originalPrompt}"

[INSTRUCTIONS]
הגרסה המשופרת צריכה להיות ממוקדת ב: "${optimizationGoal || 'שיפור כללי'}", ומותאמת לקהל יעד: "${targetAudience || 'כללי'}".
הוסף מבנה ברור, הקשר, והנחיות ספציפיות לפורמט התגובה הרצוי.`;

            const improvements = [
                '✅ נוספה הגדרת תפקיד מקצועי.',
                '✅ נוצר מבנה ברור עם חלוקה להקשר, משימה והוראות.',
                '✅ שולבו יעדי השיפור שהוגדרו (מטרה וקהל יעד).',
                '✅ נוספה הנחיה להוספת הקשר ומבנה לתוצאה הסופית.'
            ];

            document.getElementById('optimizedOutput').textContent = optimizedPrompt;
            document.getElementById('improvementAnalysis').innerHTML = improvements.join('<br>');
            document.getElementById('optimizationResult').classList.remove('hidden');
            navigator.clipboard.writeText(optimizedPrompt).then(() => {
                showNotification('פרומפט משופר הועתק!', 'success');
            });
        }

        function copyPrompt() {
            navigator.clipboard.writeText(document.getElementById('promptText').textContent).then(() => {
                showNotification('פרומפט הועתק ללוח!', 'success');
            });
        }

        document.addEventListener('DOMContentLoaded', function() {
            createGalaxy();
            updateRealTimeStats();
            setInterval(updateDynamicColors, 100);
            showNotification('ברוכים הבאים למעבדה המתקדמת!', 'success', 4000);
        });
    </script>
</body>
</html>